# 第六章-基本分页存储管理的概念

分页存储管理是一种非连续分配管理方式。

## 什么是分页存储

### 页框的概念

系统会将内存分为大小相等（例如 4KB）的若干个页框，并将其按地址升序从 0 开始编号。

页框有很多别名，包括页帧、内存块、物理块、物理页面等。其编号就在名称后加“号”字。

### 页的概念

将 **进程的逻辑地址空间** 也分为与页框大小相等的部分，每个部分称为一个页或者一个页面。其编号称为页号，从 0 开始。

### 分页存储的概念

操作系统会将进程的页装入页框，使其一一对应。通过这种手段，操作系统可以将完整的进程以页的大小为尺寸打碎，装入分散的页框当中。

### 数据结构：页表

操作系统会给每个进程的 PCB 中塞一张页表，上面记录该进程的各个页在内存中存放的位置。

页表的每一项记录一个页号一个块号，页号是进程的某一个页的页号，而块号是该页所在的页框的页框号（即内存块号）。

简而言之，页表每一项记录某个进程的某一页所在的页框在内存中的位置。

#### 与页表相关的计算

每个页表项占用的字节数？

1. 先求页框号所占的字节数：内存大小和页框大小均转换为字节，两者相除，得页框总数；将其对 2 取对数，得到块号所占比特数；由于块号是按字节 Byte 存储，将比特数除以 8 取上整，即为存储块号所占的字节数。
2. 页号不占存储空间，因为页是连续存放的，只需要知道起始地址就可以推算，类比数组和线性表。
3. 故若页表有 n 项，占用的字节数就是 3n Byte。

另需注意：页表并不记录页框的起始地址。若需要计算某个页框的起始地址，需将其页框号乘以按比特计量的页框大小。

### 分页存储如何实现地址转换

1. 操作系统需要先找到需要访问的那个逻辑地址在哪个页号上
2. 查页表，确定该页在内存中的起始地址
3. 确定这个地址相比该页的起始地址偏移了多少（页内偏移量）
4. 将该页起始地址加上偏移量即得物理地址。

#### 例题

页面大小 50B 的计算机中，有一逻辑地址空间大小为 200B 的进程。问逻辑地址 110 所对的页号和业内偏移量？

解：逻辑地址除以页面长度，商数为页号，余数为页内偏移量。

计算机使用二进制，故若页面大小是 2 的整数次幂，只需要使用移位来计算上面的除法，速度很快。

2^页内偏移量的位数 = 页面大小

2^页号的位数 = 一个进程最多可以占有的页总数