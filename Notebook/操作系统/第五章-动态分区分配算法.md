# 第五章-动态分区分配算法

## 四种分配算法

首次适应算法、最佳适应算法、最坏适应算法、邻近适应算法

### 首次适应算法

#### 首次适应算法的算法思想

每次都从低地址开始查找，找到第一个能满足大小的空闲分区。

#### 首次适应算法的实现方式

空间分区按地址升序排列，每次分配内存时，顺序查找空闲分区表，若大小满足要求，则将装入模块装入此处。

#### 首次适应算法的优点

首次适应无需反复排序空闲分区表，降低了算法开销。

*四种算法当中，首次适应算法反而是最好的。*

### 最佳适应算法

#### 最佳适应算法的算法思想

动态分区分配是一种 **连续分配方式**，

为保证给大进程留下足够大的连续内存空间，应当尽可能的将小的空闲区分给即将装入内存的模块。

#### 最佳适应算法的实现方式

将空闲分区按容量升序排列，每次分配内存时，顺序查找空闲分区表，将第一个满足要求的分区分给装入模块。

#### 最佳适应算法的缺点

会产生很多、很小的外部碎片。

### 最坏适应算法（最大适应算法）

与最佳适应算法恰好相反，将空闲分区按容量降序排列，每次选择第一个（最大的）空闲分区。其目的是尽量减少外部碎片。

每次分配完毕之后，需要重新对空闲分区表排序。

#### 最坏适应算法的缺点

会产生不连续的大空间，导致需要装入大进程时没有足够的连续大空间。

### 邻近适应算法

#### 邻近适应算法的算法思想

首次适应算法每次都从链头开始查找，可能导致低地址部分频繁被使用，产生小的空闲分区，而每次分配查找时都要经过这些分区，增加查找开销。

故改为从上次查找结束的位置开始查找，以解决上述问题。

#### 邻近适应算法的实现方式

将空闲分区按地址升序排列，接成循环链表，每次从上次查找的结束位置开始查找大小满足条件的第一个空闲分区。

#### 邻近适应算法的优点

与首次适应算法相似地，邻近适应算法无需反复排序空闲分区表，降低了算法开销。

#### 邻近适应算法的缺点

首次适应算法总会检索低地址的小分区，因此高地址部分的大分区被保留下来的可能性增加，类似最佳适应；

但邻近适应算法会均匀使用整个内存空间，将其碎片化导致没有大分区可用。