# 第四章-连续分配管理方式

## 连续分配的定义

为用户进程分配一个连续的内存空间的行为，称为连续分配。

## 具体的连续分配方式

### 单一连续分配

单一连续分区分配方式中，内存被分为系统区和用户区。

一个程序独占用户区。

#### 单一连续分配的优点

- 实现简单
- 无外部碎片
- 可以使用覆盖技术
- 不一定需要内存保护

例子：MS-DOS 系统。

#### 单一连续分配的缺点

- 只能用于单用户、单任务的操作系统
- 有内部碎片
- 存储器利用率极低

分配给某个进程的内存区域中未使用的部分称为内部碎片。

### 固定分区分配

最早的多道程序系统的内存管理方式。

#### 固定分区分配的实现方式

将用户区划分成若干个分区，可以等大也可以不等大。每个分区只放入一道作业。

等大分区的方法缺乏灵活性，但适合控制多个相同的程序对象；

不等大分区的方法增加了灵活性，可以把大进程放入大分区，小进程放入小分区。

操作系统会建立一个称为分区说明表的数据结构，包含分区号、起始地址、大小、分配与否。

操作系统每次需要装入一个程序时，检索此表，找到适合的分区，装入，再修改此表。

#### 固定分区分配的优点

- 实现简单
- 无外部碎片

#### 固定分区分配的缺点

- 用户程序太大时，可能所有的分区都不满足需求，此时必须借助覆盖技术，导致性能浪费
- 仍然会产生内部碎片

### 动态分区分配（可变分区分配）

只在进程装入内存时，根据进程的大小动态建立分区。来多少分多少。

#### 动态分区分配的实现方式

##### 三个问题

1. 系统用什么数据结构记录内存使用情况？
2. 如何从多个空闲分区中挑出一个合适的分区来分配？
3. 如何进行分区的分配和回收？

##### 第一个问题

使用空闲分区表或空闲分区链来记录。

前者记录空闲分区的编号、大小、起始地址。没有记录在此表中的内存空间显然就是已经被分出去了。

后者是双向链表。

##### 第二个问题

需要按照一定的动态分区分配算法来进行。

##### 第三个问题

分配：检索空闲分区表，按照一定的动态分区分配算法进行。

若分配后空闲分区数目不改变，那么只修改表项；若分配后将某个空闲分区整个分出去，那么还需要删除此分区所对应的表项。

回收：假如回收空间前、后有相邻的空闲分区，就会涉及到空闲分区的合并。

空闲分区表的排序方式与相应的动态分区分配算法有关。

#### 动态分区分配的优点

没有内部碎片。

#### 动态分区分配的缺点

假如内存中出现了太小的空闲分区，总是不能被利用，这些空间就成为外部碎片。

可以采用紧凑（拼凑，Compaction）技术解决外部碎片，将所有的进程移到一起，将空闲分区整合起来，消除外部碎片。

需要配套使用动态重定位装入方式和重定位寄存器。
