# 第十一讲-面向对象程序设计
## 定义类的一般方法
```python
class 类名(父类名):
    def __init__(参数表):   # 构造函数 / 构造方法
        ...
        return
    def 类内方法(参数表):
        ...
        return
def main():
  主函数体
  return
main()
```
构造方法的方法名必须使用 `__init__` 这个名字。

只定义，通常不显式调用。

Python 会给没写构造方法的类自动生成一个默认构造方法。这一点和 CPP 是一样的。
### 构造方法的一般写法
```python
def __init__(self, 可选参数1, 可选参数2, ..., 可选参数n):   # 构造函数 / 构造方法
```
构造方法的第一个形参 `self` 代表正在构建的对象名称，

取什么名字无所谓，但是必须要代表正在构建的对象。
### 实例方法的一般写法
```python
def 方法名(s, 可选参数1, 可选参数2, ..., 可选参数n):
    函数体
    return
```
这个 `s` 代表了调用该方法的对象名，类似 Java 语言中的 `this`。

### 声明对象的一般方法
```python
变量名 = 类名(构造函数可选参数1, 构造函数可选参数2, 构造函数可选参数3, ...,构造函数可选参数n)
```
就声明了一个该类的对象，其内容由输入的实参来确定，并将对象赋值给 `变量名`。
## Python 中的类、类对象、实例对象
别的面向对象语言中，类是完全抽象的。

Python 中类本身被构造出来之后，就会形成一个**唯一的**类对象，与类名同名。

类对象具有两个功能：引用、实例化。

引用是指通过类对象，访问类中的类属性或者类方法。

实例化就是声明对象的过程。得到的对象称为“实例对象”，可以有无数多个，与其他面向对象语言中的“对象”意义相近。
### 类属性和实例属性
“属性”就是*对象拥有的变量*。

类属性是类对象拥有的变量，通过类对象来调用。

实例属性是每个实例私有的，通过实例对象来调用。

例程如下：
```python
>>> class A:
	x=2
# 上面的 x 就是类属性	
>>> print(A.x)
2
# 通过类对象的名称（与类名相同）去访问。
```

使用类属性的好处是：节省内存，无需在不同实例中反复声明；

便于维护，只要改动类属性一处，而无需对类的所有属性做修改。

公有的类属性可以在类外用类对象来调用。

最好不用实例对象来访问类属性，避免手滑修改了类属性的值等意外情况。

类定义结束之后，还可以在类外继续定义类属性，但不推荐这样做。
```python
类名.新属性名=值
```

实例属性也可以在类外定义：
```python
对象变量名.新属性名=值
```

实例属性与类属性同名的时候，优先访问实例属性。

换言之，同名类属性可以作为实例属性的默认值。
## 类的公有属性和私有属性
在属性、方法名前加双下划线 `__` 就表明是私有的。

私有的属性和方法只能在类内访问，类外使用对象名调用此方法将报错。

对于本类的方法，私有不起作用，可以任意访问（也就是类内访问）。
## 析构方法
`__del__` 是固定的析构方法的名字。

如果不写，Python 会给你生成一个。

不宜显式调用。
## 构造方法重载
Python 不支持构造方法重载：
```python
>>> class A:
	def __init__(s,a,b): # 不起作用
		s.a=a
		s.b=b
		return
	def __init__(s):
		s.a='wdnmd'
		s.b='gknmlgb'
		return

	
>>> s1=A(1,2)
Traceback (most recent call last):
  File "<pyshell#19>", line 1, in <module>
    s1=A(1,2)
TypeError: __init__() takes 1 positional argument but 3 were given

>>> s2=A()
>>> print(s2.a,s2.b)
wdnmd gknmlgb

# 后定义的构造方法覆盖了先定义的构造方法
```
对于上述程序，可以采用让第一个方法中的形参`a`, `b`带有默认值，取消第二个方法，

借此实现想要达到的功能。

修改后的程序如下：
```python
>>> class A:
	def __init__(s,a='wdnmd',b='gknmlgb'):
		s.a=a
		s.b=b
		return

# 修改后的构造函数，在不借助重载的前提下，
# 保证了构造函数可以在多种情况下使用

>>> obj1=A(1,2)
>>> print(obj1.a,obj1.b)
1 2
>>> obj2=A()
>>> print(obj2.a,obj2.b)
wdnmd gknmlgb
```
## 类方法
类方法是类对象拥有的方法，只能访问类属性，不能访问实例属性。
### 类方法的一般声明方法
```pyrhon
@classmethod 类方法名(cls, 可选参数1, 可选参数2, ..., 可选参数n):
    类方法体
    return
```
第一个形参必须代表类对象，一般起名 `cls`。

`@classmethod` 修饰符在每个类方法前面都要加一个。
## 静态方法
必须使用 `@staticmethod` 修饰符来声明。

静态方法是唯一在类内可以不需要形参的方法。

静态方法可以被类对象和实例对象所调用。

静态方法和类方法如果同名，也会出现相互覆盖的情况。

实际编程过程中要避免这种情况！不要觉得有重载这回事！
## 继承
Python 子类继承了父类的属性时，需要自己手动调用子类的构造和析构方法。

允许多重继承，继承多个类。
## 多态
